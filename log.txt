
📸 Generated GIF: 461 frames, 15.37s
📊 Captured 11100 frames, buffer: 600 frames (20.0s)
📥 Received response: 1585142 bytes
✅ GIF received: 461 frames, 15.37s
✅ Loaded animated GIF: 202 frames, format=GIF
🎥 Received GIF: 461 frames, 15.37s
🔍 DEBUG:    Time range: 1752966021.86 → 1752966037.23
🔍 DEBUG:    GIF size: 1584972 bytes (base64)
🔍 DEBUG:    PIL Image: Animated=True, PIL_frames=202, Format=GIF
🔍 DEBUG: 🧠 Making AI decision from received GIF...
🔍 DEBUG:    Content 1: Animated GIF - Complete video (thinking + action): 461 frames over 15.37s at 30 FPS
🔍 DEBUG: 💾 Saving AI frames for inspection: description='Animated GIF - Complete video (thinking + action): 461 frames over 15.37s at 30 FPS'
✅ 🤖 Saved 1 AI frames to /Users/chengwan/Projects/pokemonAI/LLM-Pokemon-Red/data/videos/ai_frames/ai_request_20250719_160042
🔍 DEBUG: 🗑️ Removed old AI request: ai_request_20250719_155952
🔍 DEBUG: 💾 GIF saved to: /Users/chengwan/Projects/pokemonAI/LLM-Pokemon-Red/data/videos/ai_frames/ai_request_20250719_160045/ai_content_01_*.gif
📊 Captured 11250 frames, buffer: 600 frames (20.0s)
Tool call: press_button, args: {'buttons': ['A']}
🤖 AI RESPONSE: I've just arrived in my house, and it seems my mother is telling me to go to my room, which is upstairs. I see a large Pokémon, likely a Slaking, lounging near a table.

My immediate goal is to follow her instructions and head upstairs. First, I'll press 'A' to advance the dialogue, and then I'll navigate towards the stairs in the upper left corner of the room.
👆 AI ACTION: Decision made: 1 buttons
🔍 DEBUG: ✅ Decision received, sending button commands
👆 AI ACTION: Decision: Press 1 buttons: A
🔍 DEBUG:    Button codes with durations: 0 | 2
🔍 DEBUG: 📡 Sending to emulator: 0|2
👆 AI ACTION: ✅ Button commands sent to emulator
🎮 Received enhanced screenshot with game state
🔍 DEBUG: Enhanced Game State: GameState(player_x=24, player_y=28, player_direction='UNKNOWN (28)', map_id=24, additional_data={}), Button Count: 1
🔍 DEBUG:    Screenshot: /Users/chengwan/Projects/pokemonAI/LLM-Pokemon-Red/data/screenshots/screenshot.png
🔍 DEBUG:    Previous screenshot: /Users/chengwan/Projects/pokemonAI/LLM-Pokemon-Red/data/screenshots/previous_screenshot.png
🔍 DEBUG: 🎥 Using dual-process video system for enhanced screenshot
🔍 DEBUG: 📹 Requesting GIF from video process...
🔗 Connecting to video process at 127.0.0.1:8889
📤 Sending GIF request: {'type': 'get_gif'}
📸 Subsequent GIF request: 15.40s since last GIF
📊 Captured 11400 frames, buffer: 600 frames (20.0s)
📊 Captured 11550 frames, buffer: 600 frames (20.0s)
📸 Generated GIF: 461 frames, 15.40s
📥 Received response: 1265753 bytes
✅ GIF received: 461 frames, 15.40s
✅ Loaded animated GIF: 206 frames, format=GIF
🎥 Received GIF: 461 frames, 15.40s
🔍 DEBUG:    Time range: 1752966037.23 → 1752966052.63
🔍 DEBUG:    GIF size: 1265584 bytes (base64)
🔍 DEBUG:    PIL Image: Animated=True, PIL_frames=206, Format=GIF
🔍 DEBUG: 🧠 Making AI decision from received GIF...
🔍 DEBUG:    Content 1: Animated GIF - Complete video (thinking + action): 461 frames over 15.40s at 30 FPS
🔍 DEBUG: 💾 Saving AI frames for inspection: description='Animated GIF - Complete video (thinking + action): 461 frames over 15.40s at 30 FPS'
✅ 🤖 Saved 1 AI frames to /Users/chengwan/Projects/pokemonAI/LLM-Pokemon-Red/data/videos/ai_frames/ai_request_20250719_160058
🔍 DEBUG: 🗑️ Removed old AI request: ai_request_20250719_160012
🔍 DEBUG: 💾 GIF saved to: /Users/chengwan/Projects/pokemonAI/LLM-Pokemon-Red/data/videos/ai_frames/ai_request_20250719_160100/ai_content_01_*.gif
📊 Captured 11700 frames, buffer: 600 frames (20.0s)
Tool call: press_button, args: {'buttons': ['A']}
🤖 AI RESPONSE: I've just arrived in my new home, and my mom is welcoming me. She's telling me that my dad bought me a new clock. It seems like the first step is to get settled in.

To continue the conversation and see what happens next, I need to advance the dialogue. I will press the 'A' button to proceed.
👆 AI ACTION: Decision made: 1 buttons
🔍 DEBUG: ✅ Decision received, sending button commands
👆 AI ACTION: Decision: Press 1 buttons: A
🔍 DEBUG:    Button codes with durations: 0 | 2
🔍 DEBUG: 📡 Sending to emulator: 0|2
👆 AI ACTION: ✅ Button commands sent to emulator
🎮 Received enhanced screenshot with game state
🔍 DEBUG: Enhanced Game State: GameState(player_x=24, player_y=28, player_direction='UNKNOWN (28)', map_id=24, additional_data={}), Button Count: 1
🔍 DEBUG:    Screenshot: /Users/chengwan/Projects/pokemonAI/LLM-Pokemon-Red/data/screenshots/screenshot.png
🔍 DEBUG:    Previous screenshot: /Users/chengwan/Projects/pokemonAI/LLM-Pokemon-Red/data/screenshots/previous_screenshot.png
🔍 DEBUG: 🎥 Using dual-process video system for enhanced screenshot
🔍 DEBUG: 📹 Requesting GIF from video process...
🔗 Connecting to video process at 127.0.0.1:8889
📤 Sending GIF request: {'type': 'get_gif'}
📸 Subsequent GIF request: 15.00s since last GIF
📊 Captured 11850 frames, buffer: 600 frames (20.0s)
📊 Status: Both processes running for 392s
    🎬 Video Capture: Continuously recording at 30 FPS
    🎮 Game Control: Waiting for mGBA connection
    💡 Connect mGBA with script.lua to start AI gameplay

📸 Generated GIF: 450 frames, 15.00s
📊 Captured 12000 frames, buffer: 600 frames (20.0s)
📥 Received response: 1427338 bytes
✅ GIF received: 450 frames, 15.00s
✅ Loaded animated GIF: 195 frames, format=GIF
🎥 Received GIF: 450 frames, 15.00s
🔍 DEBUG:    Time range: 1752966052.63 → 1752966067.63
🔍 DEBUG:    GIF size: 1427168 bytes (base64)
🔍 DEBUG:    PIL Image: Animated=True, PIL_frames=195, Format=GIF
🔍 DEBUG: 🧠 Making AI decision from received GIF...
🔍 DEBUG:    Content 1: Animated GIF - Complete video (thinking + action): 450 frames over 15.00s at 30 FPS
🔍 DEBUG: 💾 Saving AI frames for inspection: description='Animated GIF - Complete video (thinking + action): 450 frames over 15.00s at 30 FPS'
✅ 🤖 Saved 1 AI frames to /Users/chengwan/Projects/pokemonAI/LLM-Pokemon-Red/data/videos/ai_frames/ai_request_20250719_160113
🔍 DEBUG: 🗑️ Removed old AI request: ai_request_20250719_160027
🔍 DEBUG: 💾 GIF saved to: /Users/chengwan/Projects/pokemonAI/LLM-Pokemon-Red/data/videos/ai_frames/ai_request_20250719_160115/ai_content_01_*.gif
📊 Captured 12150 frames, buffer: 600 frames (20.0s)
Tool call: press_button, args: {'buttons': ['A']}
🤖 AI RESPONSE: I am in what appears to be my character's new home. My mother is welcoming me and reminding me to set the clock. A large Pokémon, which looks like a Slaking, is helping with the move.

I need to continue this conversation to progress the story. I will press the 'A' button to advance the dialogue.
👆 AI ACTION: Decision made: 1 buttons
🔍 DEBUG: ✅ Decision received, sending button commands
👆 AI ACTION: Decision: Press 1 buttons: A
🔍 DEBUG:    Button codes with durations: 0 | 2
🔍 DEBUG: 📡 Sending to emulator: 0|2
👆 AI ACTION: ✅ Button commands sent to emulator
🎮 Received enhanced screenshot with game state
🔍 DEBUG: Enhanced Game State: GameState(player_x=24, player_y=28, player_direction='UNKNOWN (28)', map_id=24, additional_data={}), Button Count: 1
🔍 DEBUG:    Screenshot: /Users/chengwan/Projects/pokemonAI/LLM-Pokemon-Red/data/screenshots/screenshot.png
🔍 DEBUG:    Previous screenshot: /Users/chengwan/Projects/pokemonAI/LLM-Pokemon-Red/data/screenshots/previous_screenshot.png
🔍 DEBUG: 🎥 Using dual-process video system for enhanced screenshot
🔍 DEBUG: 📹 Requesting GIF from video process...
🔗 Connecting to video process at 127.0.0.1:8889
📤 Sending GIF request: {'type': 'get_gif'}
📸 Subsequent GIF request: 15.16s since last GIF
📊 Captured 12300 frames, buffer: 600 frames (20.0s)
📊 Captured 12450 frames, buffer: 600 frames (20.0s)
📸 Generated GIF: 454 frames, 15.16s
📥 Received response: 731366 bytes
✅ GIF received: 454 frames, 15.16s
✅ Loaded animated GIF: 161 frames, format=GIF
🎥 Received GIF: 454 frames, 15.16s
🔍 DEBUG:    Time range: 1752966067.63 → 1752966082.79
🔍 DEBUG:    GIF size: 731196 bytes (base64)
🔍 DEBUG:    PIL Image: Animated=True, PIL_frames=161, Format=GIF
🔍 DEBUG: 🧠 Making AI decision from received GIF...
🔍 DEBUG:    Content 1: Animated GIF - Complete video (thinking + action): 454 frames over 15.16s at 30 FPS
🔍 DEBUG: 💾 Saving AI frames for inspection: description='Animated GIF - Complete video (thinking + action): 454 frames over 15.16s at 30 FPS'
✅ 🤖 Saved 1 AI frames to /Users/chengwan/Projects/pokemonAI/LLM-Pokemon-Red/data/videos/ai_frames/ai_request_20250719_160128
🔍 DEBUG: 🗑️ Removed old AI request: ai_request_20250719_160042
🔍 DEBUG: 💾 GIF saved to: /Users/chengwan/Projects/pokemonAI/LLM-Pokemon-Red/data/videos/ai_frames/ai_request_20250719_160130/ai_content_01_*.gif
📊 Captured 12600 frames, buffer: 600 frames (20.0s)
Tool call: press_button, args: {'buttons': ['DOWN', 'A']}
🤖 AI RESPONSE: I am currently inside a house, which appears to be my starting home. There is a woman, likely my mother, standing on the exit mat, blocking my way out. There are also two Pokémon, a Slaking and a Vigoroth, in the room.

To proceed with the game and begin my Pokémon journey, I need to exit the house. I will first move down to face my mother and then press 'A' to interact with her, hoping she will move out of the way after our conversation.
👆 AI ACTION: Decision made: 2 buttons
🔍 DEBUG: ✅ Decision received, sending button commands
👆 AI ACTION: Decision: Press 2 buttons: A, DOWN
🔍 DEBUG:    Button codes with durations: 7,0 | 2,2
🔍 DEBUG: 📡 Sending to emulator: 7,0|2,2
👆 AI ACTION: ✅ Button commands sent to emulator
📊 Captured 12750 frames, buffer: 600 frames (20.0s)
🎮 Received enhanced screenshot with game state
🔍 DEBUG: Enhanced Game State: GameState(player_x=24, player_y=28, player_direction='UNKNOWN (28)', map_id=24, additional_data={}), Button Count: 2
🔍 DEBUG:    Screenshot: /Users/chengwan/Projects/pokemonAI/LLM-Pokemon-Red/data/screenshots/screenshot.png
🔍 DEBUG:    Previous screenshot: /Users/chengwan/Projects/pokemonAI/LLM-Pokemon-Red/data/screenshots/previous_screenshot.png
🔍 DEBUG: 🎥 Using dual-process video system for enhanced screenshot
🔍 DEBUG: 📹 Requesting GIF from video process...
🔗 Connecting to video process at 127.0.0.1:8889
📤 Sending GIF request: {'type': 'get_gif'}
📸 Subsequent GIF request: 16.06s since last GIF
📊 Status: Both processes running for 422s
    🎬 Video Capture: Continuously recording at 30 FPS
    🎮 Game Control: Waiting for mGBA connection
    💡 Connect mGBA with script.lua to start AI gameplay

📊 Captured 12900 frames, buffer: 600 frames (20.0s)
📸 Generated GIF: 481 frames, 16.06s
📊 Captured 13050 frames, buffer: 600 frames (20.0s)
📥 Received response: 1987399 bytes
✅ GIF received: 481 frames, 16.06s
✅ Loaded animated GIF: 453 frames, format=GIF
🎥 Received GIF: 481 frames, 16.06s
🔍 DEBUG:    Time range: 1752966082.79 → 1752966098.84
🔍 DEBUG:    GIF size: 1987228 bytes (base64)
🔍 DEBUG:    PIL Image: Animated=True, PIL_frames=453, Format=GIF
🔍 DEBUG: 🧠 Making AI decision from received GIF...
🔍 DEBUG:    Content 1: Animated GIF - Complete video (thinking + action): 481 frames over 16.06s at 30 FPS
🔍 DEBUG: 💾 Saving AI frames for inspection: description='Animated GIF - Complete video (thinking + action): 481 frames over 16.06s at 30 FPS'
📊 Captured 13200 frames, buffer: 600 frames (20.0s)
✅ 🤖 Saved 1 AI frames to /Users/chengwan/Projects/pokemonAI/LLM-Pokemon-Red/data/videos/ai_frames/ai_request_20250719_160148
🔍 DEBUG: 🗑️ Removed old AI request: ai_request_20250719_160058
🔍 DEBUG: 💾 GIF saved to: /Users/chengwan/Projects/pokemonAI/LLM-Pokemon-Red/data/videos/ai_frames/ai_request_20250719_160156/ai_content_01_*.gif
📊 Captured 13350 frames, buffer: 600 frames (20.0s)
Tool call: press_button, args: {'buttons': ['DOWN']}
🤖 AI RESPONSE: I see my character, Gemini, inside a house. There's a woman standing near the exit mat, and two Pokémon, a Slaking and a Vigoroth, are also in the room. It seems like this is my starting house.

My goal is to leave the house and begin my Pokémon adventure. To do this, I need to walk onto the orange mat at the bottom of the screen. I will press the "DOWN" button to move my character onto the mat and exit the building.
👆 AI ACTION: Decision made: 1 buttons
🔍 DEBUG: ✅ Decision received, sending button commands
👆 AI ACTION: Decision: Press 1 buttons: DOWN
🔍 DEBUG:    Button codes with durations: 7 | 2
🔍 DEBUG: 📡 Sending to emulator: 7|2
👆 AI ACTION: ✅ Button commands sent to emulator
📊 Captured 13500 frames, buffer: 600 frames (20.0s)
🎮 Received enhanced screenshot with game state
🔍 DEBUG: Enhanced Game State: GameState(player_x=24, player_y=28, player_direction='UNKNOWN (28)', map_id=24, additional_data={}), Button Count: 1
🔍 DEBUG:    Screenshot: /Users/chengwan/Projects/pokemonAI/LLM-Pokemon-Red/data/screenshots/screenshot.png
🔍 DEBUG:    Previous screenshot: /Users/chengwan/Projects/pokemonAI/LLM-Pokemon-Red/data/screenshots/previous_screenshot.png
🔍 DEBUG: 🎥 Using dual-process video system for enhanced screenshot
🔍 DEBUG: 📹 Requesting GIF from video process...
🔗 Connecting to video process at 127.0.0.1:8889
📤 Sending GIF request: {'type': 'get_gif'}
📸 Subsequent GIF request: 24.80s since last GIF
📊 Captured 13650 frames, buffer: 600 frames (20.0s)
📊 Status: Both processes running for 452s
    🎬 Video Capture: Continuously recording at 30 FPS
    🎮 Game Control: Waiting for mGBA connection
    💡 Connect mGBA with script.lua to start AI gameplay

📊 Captured 13800 frames, buffer: 600 frames (20.0s)
❌ Error requesting GIF from video process: timed out
❌ Failed to get GIF from video process: No response
⚠️ ⚠️ No decision received from video process
🔍 DEBUG: 🔄 Requesting new state from emulator
🎮 Received game state for dual-process mode
🎮 DEBUG: Received state message with 4 parts: ['UNKNOWN (28)', '24', '28', '24']
🔍 DEBUG: Game State: GameState(player_x=24, player_y=28, player_direction='UNKNOWN (28)', map_id=24, additional_data={})
🎮 DEBUG: Parsed game state - Map: 24, Pos: (24, 28)
🎮 DEBUG: Making on-demand decision from video process...
🔍 DEBUG: 📹 Requesting GIF from video process...
🔗 Connecting to video process at 127.0.0.1:8889
📤 Sending GIF request: {'type': 'get_gif'}
📸 Subsequent GIF request: 34.85s since last GIF
📸 Generated GIF: 600 frames, 24.80s
❌ Error handling GIF request: [Errno 32] Broken pipe
📊 Captured 13950 frames, buffer: 600 frames (20.0s)
📸 Generated GIF: 600 frames, 34.85s
📊 Captured 14100 frames, buffer: 600 frames (20.0s)
📥 Received response: 2053413 bytes
✅ GIF received: 600 frames, 34.85s
✅ Loaded animated GIF: 406 frames, format=GIF
🎥 Received GIF: 600 frames, 34.85s
🔍 DEBUG:    Time range: 1752966098.84 → 1752966133.69
🔍 DEBUG:    GIF size: 2053244 bytes (base64)
🔍 DEBUG:    PIL Image: Animated=True, PIL_frames=406, Format=GIF
🔍 DEBUG: 🧠 Making AI decision from received GIF...
🔍 DEBUG:    Content 1: Animated GIF - Complete video (thinking + action): 600 frames over 34.85s at 30 FPS
🔍 DEBUG: 💾 Saving AI frames for inspection: description='Animated GIF - Complete video (thinking + action): 600 frames over 34.85s at 30 FPS'
📊 Captured 14250 frames, buffer: 600 frames (20.0s)
✅ 🤖 Saved 1 AI frames to /Users/chengwan/Projects/pokemonAI/LLM-Pokemon-Red/data/videos/ai_frames/ai_request_20250719_160223
🔍 DEBUG: 🗑️ Removed old AI request: ai_request_20250719_160113
🔍 DEBUG: 💾 GIF saved to: /Users/chengwan/Projects/pokemonAI/LLM-Pokemon-Red/data/videos/ai_frames/ai_request_20250719_160229/ai_content_01_*.gif
📊 Captured 14400 frames, buffer: 600 frames (20.0s)
Tool call: press_button, args: {'buttons': ['A']}
🤖 AI RESPONSE: I see my character, Gemini, standing in a room with my mom. She is speaking to me, and the dialogue box at the bottom of the screen shows her asking "Well, GEMINI?". It seems like I'm in the middle of a conversation with her.

I need to continue this conversation to progress in the game's story. To do that, I will press the 'A' button to advance the dialogue.
👆 AI ACTION: Decision made: 1 buttons
🎮 DEBUG: Decision received, sending buttons: [0]
🔍 DEBUG: 🕐 Calculated action duration: 1 buttons = 62 frames = 1.03s
👆 AI ACTION: Decision: Press 1 buttons: A
🔍 DEBUG:    Button codes with durations: 0 | 2
🔍 DEBUG: 📡 Sending to emulator: 0|2
👆 AI ACTION: ✅ Button commands sent to emulator
🎮 DEBUG: Action duration: 1.03s, next GIF in 1.53s
🎮 DEBUG: Action completed at T=1752966156.24, next GIF available in 0.5s
🎮 Received enhanced screenshot with game state
🔍 DEBUG: Enhanced Game State: GameState(player_x=24, player_y=28, player_direction='UNKNOWN (28)', map_id=24, additional_data={}), Button Count: 1
🔍 DEBUG:    Screenshot: /Users/chengwan/Projects/pokemonAI/LLM-Pokemon-Red/data/screenshots/screenshot.png
🔍 DEBUG:    Previous screenshot: /Users/chengwan/Projects/pokemonAI/LLM-Pokemon-Red/data/screenshots/previous_screenshot.png
🔍 DEBUG: 🎥 Using dual-process video system for enhanced screenshot
🔍 DEBUG: 📹 Requesting GIF from video process...
🔗 Connecting to video process at 127.0.0.1:8889
📤 Sending GIF request: {'type': 'get_gif'}
📸 Subsequent GIF request: 23.53s since last GIF
📊 Captured 14550 frames, buffer: 600 frames (20.0s)
📊 Status: Both processes running for 482s
    🎬 Video Capture: Continuously recording at 30 FPS
    🎮 Game Control: Waiting for mGBA connection
    💡 Connect mGBA with script.lua to start AI gameplay

📊 Captured 14700 frames, buffer: 600 frames (20.0s)
📸 Generated GIF: 600 frames, 23.53s
📥 Received response: 2074055 bytes
✅ GIF received: 600 frames, 23.53s
✅ Loaded animated GIF: 276 frames, format=GIF
🎥 Received GIF: 600 frames, 23.53s
🔍 DEBUG:    Time range: 1752966133.69 → 1752966157.22
🔍 DEBUG:    GIF size: 2073884 bytes (base64)
🔍 DEBUG:    PIL Image: Animated=True, PIL_frames=276, Format=GIF
🔍 DEBUG: 🧠 Making AI decision from received GIF...
🔍 DEBUG:    Content 1: Animated GIF - Complete video (thinking + action): 600 frames over 23.53s at 30 FPS
🔍 DEBUG: 💾 Saving AI frames for inspection: description='Animated GIF - Complete video (thinking + action): 600 frames over 23.53s at 30 FPS'
📊 Captured 14850 frames, buffer: 600 frames (20.0s)
✅ 🤖 Saved 1 AI frames to /Users/chengwan/Projects/pokemonAI/LLM-Pokemon-Red/data/videos/ai_frames/ai_request_20250719_160244
🔍 DEBUG: 🗑️ Removed old AI request: ai_request_20250719_160128
🔍 DEBUG: 💾 GIF saved to: /Users/chengwan/Projects/pokemonAI/LLM-Pokemon-Red/data/videos/ai_frames/ai_request_20250719_160247/ai_content_01_*.gif
Tool call: press_button, args: {'buttons': ['A']}
🤖 AI RESPONSE: I am currently in a house, talking to a girl. The dialogue box at the bottom of the screen shows an incomplete sentence, "Aren't you interested in see".

To continue the conversation and see the rest of the text, I need to advance the dialogue. I will press the 'A' button to proceed.
👆 AI ACTION: Decision made: 1 buttons
🔍 DEBUG: ✅ Decision received, sending button commands
👆 AI ACTION: Decision: Press 1 buttons: A
🔍 DEBUG:    Button codes with durations: 0 | 2
🔍 DEBUG: 📡 Sending to emulator: 0|2
👆 AI ACTION: ✅ Button commands sent to emulator
📊 Captured 15000 frames, buffer: 600 frames (20.0s)
🎮 Received enhanced screenshot with game state
🔍 DEBUG: Enhanced Game State: GameState(player_x=24, player_y=28, player_direction='UNKNOWN (28)', map_id=24, additional_data={}), Button Count: 1
🔍 DEBUG:    Screenshot: /Users/chengwan/Projects/pokemonAI/LLM-Pokemon-Red/data/screenshots/screenshot.png
🔍 DEBUG:    Previous screenshot: /Users/chengwan/Projects/pokemonAI/LLM-Pokemon-Red/data/screenshots/previous_screenshot.png
🔍 DEBUG: 🎥 Using dual-process video system for enhanced screenshot
🔍 DEBUG: 📹 Requesting GIF from video process...
🔗 Connecting to video process at 127.0.0.1:8889
📤 Sending GIF request: {'type': 'get_gif'}
📸 Subsequent GIF request: 17.06s since last GIF
📊 Captured 15150 frames, buffer: 600 frames (20.0s)
📸 Generated GIF: 511 frames, 17.06s
📥 Received response: 1137394 bytes
✅ GIF received: 511 frames, 17.06s
✅ Loaded animated GIF: 211 frames, format=GIF
🎥 Received GIF: 511 frames, 17.06s
🔍 DEBUG:    Time range: 1752966157.22 → 1752966174.28
🔍 DEBUG:    GIF size: 1137224 bytes (base64)
🔍 DEBUG:    PIL Image: Animated=True, PIL_frames=211, Format=GIF
🔍 DEBUG: 🧠 Making AI decision from received GIF...
🔍 DEBUG:    Content 1: Animated GIF - Complete video (thinking + action): 511 frames over 17.06s at 30 FPS
🔍 DEBUG: 💾 Saving AI frames for inspection: description='Animated GIF - Complete video (thinking + action): 511 frames over 17.06s at 30 FPS'
📊 Captured 15300 frames, buffer: 600 frames (20.0s)
✅ 🤖 Saved 1 AI frames to /Users/chengwan/Projects/pokemonAI/LLM-Pokemon-Red/data/videos/ai_frames/ai_request_20250719_160300
🔍 DEBUG: 🗑️ Removed old AI request: ai_request_20250719_160148
🔍 DEBUG: 💾 GIF saved to: /Users/chengwan/Projects/pokemonAI/LLM-Pokemon-Red/data/videos/ai_frames/ai_request_20250719_160303/ai_content_01_*.gif
📊 Captured 15450 frames, buffer: 600 frames (20.0s)
Tool call: press_button, args: {'buttons': ['DOWN']}
🤖 AI RESPONSE: I see that I am inside a house, which appears to be my starting home. A woman, likely my mother, is standing near the exit mat. My character is positioned just above the mat.

My goal is to leave the house and begin my Pokémon adventure. To do this, I need to step onto the exit mat. I will press the "DOWN" button to move onto the mat and exit the building.
👆 AI ACTION: Decision made: 1 buttons
🔍 DEBUG: ✅ Decision received, sending button commands
👆 AI ACTION: Decision: Press 1 buttons: DOWN
🔍 DEBUG:    Button codes with durations: 7 | 2
🔍 DEBUG: 📡 Sending to emulator: 7|2
👆 AI ACTION: ✅ Button commands sent to emulator
🎮 Received enhanced screenshot with game state
🔍 DEBUG: Enhanced Game State: GameState(player_x=24, player_y=28, player_direction='UNKNOWN (28)', map_id=24, additional_data={}), Button Count: 1
🔍 DEBUG:    Screenshot: /Users/chengwan/Projects/pokemonAI/LLM-Pokemon-Red/data/screenshots/screenshot.png
🔍 DEBUG:    Previous screenshot: /Users/chengwan/Projects/pokemonAI/LLM-Pokemon-Red/data/screenshots/previous_screenshot.png
🔍 DEBUG: 🎥 Using dual-process video system for enhanced screenshot
🔍 DEBUG: 📹 Requesting GIF from video process...
🔗 Connecting to video process at 127.0.0.1:8889
📤 Sending GIF request: {'type': 'get_gif'}
📸 Subsequent GIF request: 15.99s since last GIF
📊 Status: Both processes running for 512s
    🎬 Video Capture: Continuously recording at 30 FPS
    🎮 Game Control: Waiting for mGBA connection
    💡 Connect mGBA with script.lua to start AI gameplay

📊 Captured 15600 frames, buffer: 600 frames (20.0s)
📊 Captured 15750 frames, buffer: 600 frames (20.0s)
📸 Generated GIF: 479 frames, 15.99s
📥 Received response: 2100079 bytes
✅ GIF received: 479 frames, 15.99s
✅ Loaded animated GIF: 467 frames, format=GIF
🎥 Received GIF: 479 frames, 15.99s
🔍 DEBUG:    Time range: 1752966174.28 → 1752966190.27
🔍 DEBUG:    GIF size: 2099908 bytes (base64)
🔍 DEBUG:    PIL Image: Animated=True, PIL_frames=467, Format=GIF
🔍 DEBUG: 🧠 Making AI decision from received GIF...
🔍 DEBUG:    Content 1: Animated GIF - Complete video (thinking + action): 479 frames over 15.99s at 30 FPS
🔍 DEBUG: 💾 Saving AI frames for inspection: description='Animated GIF - Complete video (thinking + action): 479 frames over 15.99s at 30 FPS'
📊 Captured 15900 frames, buffer: 600 frames (20.0s)
📊 Captured 16050 frames, buffer: 600 frames (20.0s)
✅ 🤖 Saved 1 AI frames to /Users/chengwan/Projects/pokemonAI/LLM-Pokemon-Red/data/videos/ai_frames/ai_request_20250719_160319
🔍 DEBUG: 🗑️ Removed old AI request: ai_request_20250719_160223
🔍 DEBUG: 💾 GIF saved to: /Users/chengwan/Projects/pokemonAI/LLM-Pokemon-Red/data/videos/ai_frames/ai_request_20250719_160328/ai_content_01_*.gif
📊 Captured 16200 frames, buffer: 600 frames (20.0s)
Tool call: press_button, args: {'buttons': ['DOWN']}
🤖 AI RESPONSE: I've just arrived in my house in Littleroot Town. It seems my mom is here, along with a Vigoroth and a Slakoth. The exit to the town is at the bottom of the screen.

My goal is to leave the house and begin my Pokémon adventure. To do this, I will walk down and step onto the orange mat, which is the exit.
👆 AI ACTION: Decision made: 1 buttons
🔍 DEBUG: ✅ Decision received, sending button commands
👆 AI ACTION: Decision: Press 1 buttons: DOWN
🔍 DEBUG:    Button codes with durations: 7 | 2
🔍 DEBUG: 📡 Sending to emulator: 7|2
👆 AI ACTION: ✅ Button commands sent to emulator
🎮 Received enhanced screenshot with game state
🔍 DEBUG: Enhanced Game State: GameState(player_x=24, player_y=28, player_direction='UNKNOWN (28)', map_id=24, additional_data={}), Button Count: 1
🔍 DEBUG:    Screenshot: /Users/chengwan/Projects/pokemonAI/LLM-Pokemon-Red/data/screenshots/screenshot.png
🔍 DEBUG:    Previous screenshot: /Users/chengwan/Projects/pokemonAI/LLM-Pokemon-Red/data/screenshots/previous_screenshot.png
🔍 DEBUG: 🎥 Using dual-process video system for enhanced screenshot
🔍 DEBUG: 📹 Requesting GIF from video process...
🔗 Connecting to video process at 127.0.0.1:8889
📤 Sending GIF request: {'type': 'get_gif'}
📸 Subsequent GIF request: 26.82s since last GIF
📊 Captured 16350 frames, buffer: 600 frames (20.0s)
📊 Status: Both processes running for 542s
    🎬 Video Capture: Continuously recording at 30 FPS
    🎮 Game Control: Waiting for mGBA connection
    💡 Connect mGBA with script.lua to start AI gameplay

📊 Captured 16500 frames, buffer: 600 frames (20.0s)
❌ Error requesting GIF from video process: timed out
❌ Failed to get GIF from video process: No response
⚠️ ⚠️ No decision received from video process
🔍 DEBUG: 🔄 Requesting new state from emulator
🎮 Received game state for dual-process mode
🎮 DEBUG: Received state message with 4 parts: ['UNKNOWN (28)', '24', '28', '24']
🔍 DEBUG: Game State: GameState(player_x=24, player_y=28, player_direction='UNKNOWN (28)', map_id=24, additional_data={})
🎮 DEBUG: Parsed game state - Map: 24, Pos: (24, 28)
🎮 DEBUG: Making on-demand decision from video process...
🔍 DEBUG: 📹 Requesting GIF from video process...
🔗 Connecting to video process at 127.0.0.1:8889
📤 Sending GIF request: {'type': 'get_gif'}
📸 Subsequent GIF request: 36.83s since last GIF
📊 Captured 16650 frames, buffer: 600 frames (20.0s)
📸 Generated GIF: 600 frames, 26.82s
❌ Error handling GIF request: [Errno 32] Broken pipe
📊 Captured 16800 frames, buffer: 600 frames (20.0s)
📸 Generated GIF: 600 frames, 36.83s
📥 Received response: 3069841 bytes
✅ GIF received: 600 frames, 36.83s
✅ Loaded animated GIF: 404 frames, format=GIF
🎥 Received GIF: 600 frames, 36.83s
🔍 DEBUG:    Time range: 1752966190.27 → 1752966227.11
🔍 DEBUG:    GIF size: 3069672 bytes (base64)
🔍 DEBUG:    PIL Image: Animated=True, PIL_frames=404, Format=GIF
🔍 DEBUG: 🧠 Making AI decision from received GIF...
🔍 DEBUG:    Content 1: Animated GIF - Complete video (thinking + action): 600 frames over 36.83s at 30 FPS
🔍 DEBUG: 💾 Saving AI frames for inspection: description='Animated GIF - Complete video (thinking + action): 600 frames over 36.83s at 30 FPS'
📊 Captured 16950 frames, buffer: 600 frames (20.0s)
📊 Captured 17100 frames, buffer: 600 frames (20.0s)
✅ 🤖 Saved 1 AI frames to /Users/chengwan/Projects/pokemonAI/LLM-Pokemon-Red/data/videos/ai_frames/ai_request_20250719_160357
🔍 DEBUG: 🗑️ Removed old AI request: ai_request_20250719_160244
🔍 DEBUG: 💾 GIF saved to: /Users/chengwan/Projects/pokemonAI/LLM-Pokemon-Red/data/videos/ai_frames/ai_request_20250719_160404/ai_content_01_*.gif
📊 Captured 17250 frames, buffer: 600 frames (19.9s)
Tool call: press_button, args: {'buttons': ['A']}
🤖 AI RESPONSE: I am in what appears to be my character's house, and my mom is talking to me. The dialogue box at the bottom of the screen shows her asking me a question.

To continue the conversation and find out what my mom wants, I need to advance the text. I will press the 'A' button to see the next part of the dialogue.
👆 AI ACTION: Decision made: 1 buttons
🎮 DEBUG: Decision received, sending buttons: [0]
🔍 DEBUG: 🕐 Calculated action duration: 1 buttons = 62 frames = 1.03s
👆 AI ACTION: Decision: Press 1 buttons: A
🔍 DEBUG:    Button codes with durations: 0 | 2
🔍 DEBUG: 📡 Sending to emulator: 0|2
👆 AI ACTION: ✅ Button commands sent to emulator
🎮 DEBUG: Action duration: 1.03s, next GIF in 1.53s
🎮 DEBUG: Action completed at T=1752966250.34, next GIF available in 0.5s
🎮 Received enhanced screenshot with game state
🔍 DEBUG: Enhanced Game State: GameState(player_x=24, player_y=28, player_direction='UNKNOWN (28)', map_id=24, additional_data={}), Button Count: 1
🔍 DEBUG:    Screenshot: /Users/chengwan/Projects/pokemonAI/LLM-Pokemon-Red/data/screenshots/screenshot.png
🔍 DEBUG:    Previous screenshot: /Users/chengwan/Projects/pokemonAI/LLM-Pokemon-Red/data/screenshots/previous_screenshot.png
🔍 DEBUG: 🎥 Using dual-process video system for enhanced screenshot
🔍 DEBUG: 📹 Requesting GIF from video process...
🔗 Connecting to video process at 127.0.0.1:8889
📤 Sending GIF request: {'type': 'get_gif'}
📸 Subsequent GIF request: 24.23s since last GIF
📊 Status: Both processes running for 573s
    🎬 Video Capture: Continuously recording at 30 FPS
    🎮 Game Control: Waiting for mGBA connection
    💡 Connect mGBA with script.lua to start AI gameplay

📊 Captured 17400 frames, buffer: 600 frames (20.0s)
📊 Captured 17550 frames, buffer: 600 frames (20.0s)
📸 Generated GIF: 600 frames, 24.23s
📥 Received response: 3060446 bytes
✅ GIF received: 600 frames, 24.23s
✅ Loaded animated GIF: 284 frames, format=GIF
🎥 Received GIF: 600 frames, 24.23s
🔍 DEBUG:    Time range: 1752966227.11 → 1752966251.34
🔍 DEBUG:    GIF size: 3060276 bytes (base64)
🔍 DEBUG:    PIL Image: Animated=True, PIL_frames=284, Format=GIF
🔍 DEBUG: 🧠 Making AI decision from received GIF...
🔍 DEBUG:    Content 1: Animated GIF - Complete video (thinking + action): 600 frames over 24.23s at 30 FPS
🔍 DEBUG: 💾 Saving AI frames for inspection: description='Animated GIF - Complete video (thinking + action): 600 frames over 24.23s at 30 FPS'
📊 Captured 17700 frames, buffer: 600 frames (20.0s)
✅ 🤖 Saved 1 AI frames to /Users/chengwan/Projects/pokemonAI/LLM-Pokemon-Red/data/videos/ai_frames/ai_request_20250719_160419
🔍 DEBUG: 🗑️ Removed old AI request: ai_request_20250719_160300
🔍 DEBUG: 💾 GIF saved to: /Users/chengwan/Projects/pokemonAI/LLM-Pokemon-Red/data/videos/ai_frames/ai_request_20250719_160423/ai_content_01_*.gif
📊 Captured 17850 frames, buffer: 600 frames (20.0s)
Tool call: press_button, args: {'buttons': ['A']}
🤖 AI RESPONSE: I am currently inside a house, talking to a girl. The dialogue box at the bottom of the screen shows she is in the middle of a sentence. There is a large Pokémon, which looks like a Slaking, sitting at a table in the room.

To continue the conversation and see what she has to say, I need to advance the text. I will press the 'A' button to see the rest of the dialogue.
👆 AI ACTION: Decision made: 1 buttons
🔍 DEBUG: ✅ Decision received, sending button commands
👆 AI ACTION: Decision: Press 1 buttons: A
🔍 DEBUG:    Button codes with durations: 0 | 2
🔍 DEBUG: 📡 Sending to emulator: 0|2
👆 AI ACTION: ✅ Button commands sent to emulator
🎮 Received enhanced screenshot with game state
🔍 DEBUG: Enhanced Game State: GameState(player_x=24, player_y=28, player_direction='UNKNOWN (28)', map_id=24, additional_data={}), Button Count: 1
🔍 DEBUG:    Screenshot: /Users/chengwan/Projects/pokemonAI/LLM-Pokemon-Red/data/screenshots/screenshot.png
🔍 DEBUG:    Previous screenshot: /Users/chengwan/Projects/pokemonAI/LLM-Pokemon-Red/data/screenshots/previous_screenshot.png
🔍 DEBUG: 🎥 Using dual-process video system for enhanced screenshot
🔍 DEBUG: 📹 Requesting GIF from video process...
🔗 Connecting to video process at 127.0.0.1:8889
📤 Sending GIF request: {'type': 'get_gif'}
📸 Subsequent GIF request: 19.16s since last GIF
📊 Captured 18000 frames, buffer: 600 frames (20.0s)
📸 Generated GIF: 574 frames, 19.16s
📊 Captured 18150 frames, buffer: 600 frames (20.0s)
📥 Received response: 1823163 bytes
✅ GIF received: 574 frames, 19.16s
✅ Loaded animated GIF: 231 frames, format=GIF
🎥 Received GIF: 574 frames, 19.16s
🔍 DEBUG:    Time range: 1752966251.34 → 1752966270.49
🔍 DEBUG:    GIF size: 1822992 bytes (base64)
🔍 DEBUG:    PIL Image: Animated=True, PIL_frames=231, Format=GIF
🔍 DEBUG: 🧠 Making AI decision from received GIF...
🔍 DEBUG:    Content 1: Animated GIF - Complete video (thinking + action): 574 frames over 19.16s at 30 FPS
🔍 DEBUG: 💾 Saving AI frames for inspection: description='Animated GIF - Complete video (thinking + action): 574 frames over 19.16s at 30 FPS'
✅ 🤖 Saved 1 AI frames to /Users/chengwan/Projects/pokemonAI/LLM-Pokemon-Red/data/videos/ai_frames/ai_request_20250719_160437
🔍 DEBUG: 🗑️ Removed old AI request: ai_request_20250719_160319
🔍 DEBUG: 💾 GIF saved to: /Users/chengwan/Projects/pokemonAI/LLM-Pokemon-Red/data/videos/ai_frames/ai_request_20250719_160441/ai_content_01_*.gif
📊 Status: Both processes running for 603s
    🎬 Video Capture: Continuously recording at 30 FPS
    🎮 Game Control: Waiting for mGBA connection
    💡 Connect mGBA with script.lua to start AI gameplay

📊 Captured 18300 frames, buffer: 600 frames (20.0s)
Tool call: press_button, args: {'buttons': ['DOWN']}
🤖 AI RESPONSE: I am currently inside my house. I can see my mom standing near the exit, and two Pokémon, Slaking and Vigoroth, are in the room as well. My goal is to leave the house to start my Pokémon journey.

To exit, I need to walk over the orange mat at the bottom of the screen. My mom is partially blocking the way, so I will navigate around her to reach the exit. I will press the "DOWN" button to move past her and onto the mat.
👆 AI ACTION: Decision made: 1 buttons
🔍 DEBUG: ✅ Decision received, sending button commands
👆 AI ACTION: Decision: Press 1 buttons: DOWN
